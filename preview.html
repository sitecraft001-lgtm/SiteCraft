<!DOCTYPE html>
<html lang="en">
<head>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Preview</title>
<style>
  html, body {
    margin: 0;
    padding: 0;
    width: 100%;
    height: 100%;
    font-family: Arial, sans-serif;
    background: #f5f5f5;
    overflow: hidden;
  }

  .navbar {
    height: 50px;
    background: #1a1d23;
    color: white;
    display: flex;
    align-items: center;
    padding: 0 10px;
    box-shadow: 0 2px 5px rgba(0,0,0,0.3);
  }

  .back-btn {
    background: none;
    border: none;
    color: white;
    font-size: 20px;
    cursor: pointer;
    margin-right: 15px;
  }

  .title {
    flex: 1;
    text-align: center;
    font-weight: bold;
    font-size: 18px;
  }

  #preview-frame {
    width: 100%;
    height: calc(100% - 50px);
    border: none;
  }
</style>
</head>
<body>

<div class="navbar">
  <button class="back-btn" onclick="history.back()">‚Üê</button>
  <div class="title">Preview</div>
</div>

<iframe id="preview-frame"></iframe>

<script>
  const iframe = document.getElementById('preview-frame');
  const p = JSON.parse(localStorage.getItem("liveProject") || '{}');

  // Wrap user's HTML in a full mobile-friendly template
  const iframeHTML = `
    <!DOCTYPE html>
    <html lang="en">
    <head>
      <meta name="viewport" content="width=device-width, initial-scale=1.0">
      <style>
        /* Reset all fixed widths in user's HTML */
        body, html, * {
          max-width: 100% !important;
          box-sizing: border-box;
        }
        ${p.css || ''}
      </style>
    </head>
    <body>
      ${p.html || ''}
      <script>
        ${p.js || ''}
      <\/script>
    </body>
    </html>
  `;

  // Load into iframe
  iframe.srcdoc = iframeHTML;
</script>

</body>
</html>
