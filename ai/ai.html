<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Code Zing AI Chatbot</title>
<link rel="stylesheet" href="style.css">
</head>
<body>

<div class="chatbot">
  <div class="header">ðŸ¤– Code Zing AI</div>
  <div class="messages" id="chat"></div>
  <div class="input-area">
    <input type="text" id="input" placeholder="Ask me anything...">
    <button onclick="send()">Send</button>
  </div>
</div>

<script src="commands.js"></script>
<script src="autocorrect.js"></script>
<script>
const chat = document.getElementById("chat");

function addMessage(text, type) {
  const div = document.createElement("div");
  div.className = "msg " + type;
  div.innerText = text;
  chat.appendChild(div);
  chat.scrollTop = chat.scrollHeight;
}

function similarity(a, b) {
  let same = 0;
  for (let c of a) if (b.includes(c)) same++;
  return same / Math.max(a.length, b.length);
}

function showHelp() {
  return "ðŸ’¡ Try typing: html, css, javascript, error, price";
}

function botReply(text) {
  text = text.toLowerCase().trim();

  // Empty input
  if (text === "") 
    return "ðŸ˜… You didn't type anything. " + showHelp();

  // Very short input
  if (text.length < 2)
    return "ðŸ¤” Please type a full word or question.";

  // Auto correct
  for (let item of autocorrect) {
    if (item.wrong.includes(text)) {
      addMessage(`I fixed "${text}" to "${item.correct}"`, "bot");
      return commands[item.correct] || "âŒ No response found for corrected word.";
    }
  }

  // Direct match
  for (let key in commands) {
    if (text.includes(key)) return commands[key];
  }

  // Smart guess
  for (let key in commands) {
    if (similarity(text, key) > 0.6) {
      addMessage(`Did you mean "${key}"?`, "bot");
      return commands[key];
    }
  }

  // Unknown
  return "âŒ I don't understand. " + showHelp();
}

function send() {
  const input = document.getElementById("input");
  const text = input.value;

  addMessage(text || "(empty)", "user");
  input.value = "";

  setTimeout(() => {
    const reply = botReply(text);
    addMessage(reply, "bot");
  }, 400);
}

// Auto guide after 3 seconds
setTimeout(() => {
  addMessage("Tip: You can ask me about HTML, CSS, JavaScript or errors ðŸ‘‡", "bot");
}, 3000);

// Welcome
addMessage("Hi! I'm your AI assistant ðŸ¤–", "bot");
</script>

</body>
</html>